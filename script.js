const _0x39bde6=_0x50ab;!function($,x){let e=_0x50ab,a=$();for(;;)try{let t=-parseInt(e(261))/1*(parseInt(e(240))/2)+parseInt(e(294))/3+-parseInt(e(211))/4+parseInt(e(288))/5*(-parseInt(e(287))/6)+parseInt(e(194))/7+-parseInt(e(193))/8+parseInt(e(228))/9*(parseInt(e(201))/10);if(356661===t)break;a.push(a.shift())}catch(s){a.push(a.shift())}}(_0x1c5b,356661);const LOCATION_CONFIG={latitude:-34.5331,longitude:-58.5115,radius:200,sessionDuration:288e5,maxSessionTime:36e5},accessBlock=document[_0x39bde6(172)](_0x39bde6(138)),blockMessage=document[_0x39bde6(172)](_0x39bde6(180));function _0x50ab($,x){$-=126;let e=_0x1c5b();return e[$]}let autoCloseTimer=null;function validateAccess(){let $=_0x39bde6,x=localStorage[$(259)]("showroomSession");if(x){let e=JSON.parse(x),a=Date[$(126)]()-e[$(186)];if(a<LOCATION_CONFIG.sessionDuration){allowAccess();return}}requestLocationAccess()}function requestLocationAccess(){let $=_0x39bde6;if(!navigator[$(178)]){blockAccess($(253));return}blockMessage[$(153)]=$(137),accessBlock[$(155)].add("active"),navigator[$(178)].getCurrentPosition(handleLocationSuccess,handleLocationError,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}function handleLocationSuccess($){let x=_0x39bde6,e=$[x(291)][x(176)],a=$[x(291)][x(290)],t=$[x(291)][x(227)],s=calculateDistance(e,a,LOCATION_CONFIG[x(176)],LOCATION_CONFIG[x(290)]);console[x(281)](x(147)+s.toFixed(2)+x(238)+t[x(204)](2)+"m)"),s<=LOCATION_CONFIG.radius?(localStorage[x(239)](x(226),JSON[x(293)]({timestamp:Date[x(126)](),location:{lat:e,lng:a}})),allowAccess()):blockAccess(x(200)+(x(292)+s[x(204)](0)+"m del showroom</small>"))}function handleLocationError($){let x=_0x39bde6,e="",a=!1;switch($[x(207)]){case $[x(167)]:e=x(223),a=!0;break;case $[x(158)]:e=x(164)+"<small>Aseg\xfarate de tener el GPS activado</small>";break;case $.TIMEOUT:e="Tiempo de espera agotado al obtener ubicaci\xf3n.<br><br>"+x(243);break;default:e=x(218)}blockAccess(e,a)}function calculateDistance($,x,e,a){let t=_0x39bde6,s=(e-$)*Math.PI/180,c=(a-x)*Math.PI/180,i=Math[t(279)](s/2)*Math[t(279)](s/2)+Math[t(145)]($*Math.PI/180)*Math.cos(e*Math.PI/180)*Math[t(279)](c/2)*Math[t(279)](c/2);return 6371e3*(2*Math[t(244)](Math[t(183)](i),Math[t(183)](1-i)))}function allowAccess(){let $=_0x39bde6;accessBlock.classList[$(215)]($(182)),startAutoCloseTimer(),navigator.onLine?0===allData[$(199)]&&loadData():(document[$(132)][$(155)].add("offline"),showStatus("Sin conexi\xf3n a Internet","empty"))}function blockAccess($,x=!1){let e=_0x39bde6;blockMessage[e(153)]=$,accessBlock[e(155)][e(209)](e(182));let a=document[e(172)](e(230)),t=document[e(172)](e(152));a[e(153)]=e(229),x?(a[e(153)]+='<button class="secondary" onclick="openLocationSettings()">⚙️ Ir a Configuraci\xf3n</button>',t[e(143)][e(256)]=e(187),t.innerHTML=getSettingsInstructions()):t[e(143)][e(256)]=e(275)}function retryLocationCheck(){requestLocationAccess()}function openLocationSettings(){let $=_0x39bde6,x=navigator[$(130)][$(148)]();window[$(258)][$(265)],/android/i[$(166)](x)?/chrome/i[$(166)](x)?alert($(127)+$(208)+$(216)+$(232)+"4. Recarga la p\xe1gina"):alert($(127)+$(150)+$(252)+$(260)+'4. Activa "Ubicaci\xf3n"\n'+$(263)):/iphone|ipad|ipod/i.test(x)?/safari/i[$(166)](x)&&!/chrome/i[$(166)](x)?alert($(127)+$(156)+$(271)+$(241)+$(283)+$(197)):alert($(127)+$(156)+"2. Busca el nombre del navegador\n"+$(232)+$(142)):alert($(127)+$(162)+'2. Busca "Ubicaci\xf3n" en permisos\n3. Cambia a "Permitir"\n'+$(296))}function getSettingsInstructions(){let $=_0x39bde6,x=navigator[$(130)][$(148)]();return/android/i[$(166)](x)?$(225):/iphone|ipad|ipod/i.test(x)?$(274):"\uD83D\uDCA1 Haz clic en el \xedcono \uD83D\uDD12 en la barra de direcciones"}function startAutoCloseTimer(){let $=_0x39bde6;autoCloseTimer&&clearTimeout(autoCloseTimer),console[$(281)]($(179)),autoCloseTimer=setTimeout(()=>{expireSession()},LOCATION_CONFIG[$(246)])}function expireSession(){console.log("Sesi\xf3n expirada. Cerrando aplicaci\xf3n..."),localStorage[_0x39bde6(206)]("showroomSession"),showSessionExpired(),setTimeout(()=>{attemptToClose()},2e3)}function showSessionExpired(){let $=_0x39bde6,x=document[$(172)]("buttonContainer"),e=document[$(172)]("helpText");document[$(192)]($(264))[$(157)]="⏰",document[$(192)]($(268)).textContent=$(234),blockMessage[$(153)]=$(213),x[$(153)]="",e[$(143)].display=$(275),accessBlock[$(155)][$(209)]($(182))}function attemptToClose(){window.close(),setTimeout(()=>{let $=_0x50ab;blockMessage.innerHTML="La sesi\xf3n ha expirado.<br><br>"+$(236),setTimeout(()=>{let x=$;window[x(258)].href=x(135)},3e3)},500)}window[_0x39bde6(154)]("DOMContentLoaded",()=>{validateAccess()});const API_KEY=_0x39bde6(191),SPREADSHEET_ID=_0x39bde6(134),RANGO=_0x39bde6(214);let allData=[],searchTimer=null,isLoading=!1;const searchInput=document[_0x39bde6(172)]("searchInput"),resultsContainer=document[_0x39bde6(172)]("resultsContainer"),statusMessage=document[_0x39bde6(172)](_0x39bde6(133));function handleConnectionChange(){let $=_0x39bde6;navigator[$(165)]?(document[$(132)][$(155)][$(215)]($(181)),0===allData[$(199)]&&loadData()):document[$(132)][$(155)][$(209)]("offline")}async function loadData(){let $=_0x39bde6;if(!isLoading){isLoading=!0,showStatus($(219),$(272));try{let x=await fetch("https://sheets.googleapis.com/v4/spreadsheets/"+SPREADSHEET_ID+$(151)+RANGO+"?key="+API_KEY);if(!x.ok)throw Error($(235));let e=await x.json();allData=e.values||[],cacheProductImages(),searchInput[$(267)][$(190)]()?performSearch(searchInput[$(267)][$(190)]()):showStatus($(295),"empty")}catch(a){console[$(173)]("Error:",a),showStatus("❌ Error al cargar los datos. Verifique su conexi\xf3n.",$(249))}finally{isLoading=!1}}}async function cacheProductImages(){let $=_0x39bde6;if(!navigator[$(248)]||!navigator[$(248)][$(144)]){console[$(281)]($(146));return}let x=[];if(allData[$(224)](e=>{let a=$;if(e[1]){let t=e[1][a(159)](",");t[a(224)]($=>{let e=a,t=$[e(190)]();t&&!x[e(202)](t)&&x[e(174)](t)})}}),0===x[$(199)])return;let e=new MessageChannel;return new Promise((a,t)=>{let s=$;e[s(276)][s(257)]=$=>{let x=s;$[x(128)].success?(console.log(x(297)),a()):(console[x(173)](x(255),$[x(128)][x(173)]),t($[x(128)].error))},navigator[s(248)].controller[s(196)]({type:s(220),imageUrls:x},[e[s(160)]])})}async function updateImageCache(){let $=_0x39bde6;if(!confirm($(161)))return;if(!navigator[$(248)]||!navigator.serviceWorker[$(144)]){alert("Service Worker no disponible");return}let x=statusMessage[$(153)];showStatus($(188),"searching");try{let e=new MessageChannel;await new Promise((x,a)=>{let t=$;e[t(276)][t(257)]=$=>{let e=t;$[e(128)][e(129)]?x():a($[e(128)][e(173)])},navigator[t(248)][t(144)][t(196)]({type:"CLEAR_IMAGE_CACHE"},[e[t(160)]])}),await cacheProductImages(),alert($(285)),searchInput[$(267)][$(190)]()?performSearch(searchInput[$(267)][$(190)]()):showStatus($(295),$(249))}catch(a){console[$(173)]($(210),a),alert($(205)),showStatus(x,$(249))}}function handleSearchInput(){let $=_0x39bde6;clearTimeout(searchTimer);let x=searchInput[$(267)].trim();if(0===x[$(199)]){clearResults(),showStatus($(295),$(249));return}showStatus($(289),"searching"),searchTimer=setTimeout(()=>{performSearch(x)},300)}function performSearch($){if(0===allData.length){loadData();return}let x=$.toLowerCase(),e=allData.filter($=>{let e=_0x50ab;return $[2]&&$[2][e(149)]().toLowerCase()[e(202)](x)||$[3]&&$[3][e(149)]()[e(148)]().includes(x)||$[6]&&$[6][e(149)]()[e(148)]()[e(202)](x)||$[7]&&$[7][e(149)]()[e(148)]()[e(202)](x)});displayResults(e)}function displayResults($){let x=_0x39bde6;if(clearResults(),0===$[x(199)]){showStatus(x(163),"empty");return}hideStatus(),$[x(224)]($=>{let e=createResultCard($);resultsContainer[x(237)](e)})}function createResultCard($){let x=_0x39bde6,e=document[x(266)](x(231));e[x(277)]=x(185);let a=document.createElement(x(231));if(a.className=x(222),$[1]){let t=$[1].split(","),s=t[0].trim();if(s){let c=document[x(266)](x(203));c[x(169)]=s,c[x(247)]=$[3]||x(212),c.onerror=()=>{let $=x;a.classList[$(209)]($(273)),a[$(157)]="Sin imagen"},a[x(237)](c)}else a[x(155)][x(209)](x(273)),a[x(157)]="Sin imagen"}else a[x(155)][x(209)](x(273)),a[x(157)]=x(184);let i=document.createElement(x(231));i[x(277)]=x(177);let n=$[2]||$[6]||x(171),o=document[x(266)]("div");o.className=x(242),o[x(157)]="C\xf3digo: "+n;let r=$[3]||"Sin nombre",l=document[x(266)](x(231));l[x(277)]=x(170),l[x(157)]=r;let d=$[5]||x(280),u=document.createElement(x(231));return u[x(277)]=x(168),u[x(157)]=d,i[x(237)](o),i[x(237)](l),i.appendChild(u),e[x(237)](a),e[x(237)](i),e}function showStatus($,x){let e=_0x39bde6;x===e(272)||$[e(202)]("spinner")||$[e(202)](e(189))?statusMessage.innerHTML=$:statusMessage[e(153)]=$+e(233),statusMessage[e(277)]=x,statusMessage.style[e(256)]=e(187)}function hideStatus(){let $=_0x39bde6;statusMessage[$(143)].display="none"}function clearResults(){let $=_0x39bde6,x=resultsContainer[$(131)]($(140));x[$(224)](x=>x[$(215)]())}function _0x1c5b(){let $=["setItem","833944ikQIQF",'3. Toca "Ubicaci\xf3n"\n',"result-code","<small>Intenta de nuevo</small>","atan2","reload","maxSessionTime","alt","serviceWorker","empty","touchstart","setProperty",'2. Busca "Permisos de sitios"\n',"Tu dispositivo no soporta geolocalizaci\xf3n.","click","Error al cachear im\xe1genes:","display","onmessage","location","getItem","3. Encuentra este sitio\n","1fbSKKr",".key","5. Recarga la p\xe1gina","#accessBlock .icon","href","createElement","value","#accessBlock h1","documentElement","target",'2. Busca "Safari"\n',"searching","no-image","\uD83D\uDCA1 Ve a Ajustes de iOS > Safari/Navegador > Ubicaci\xf3n","none","port1","className","Backspace","sin","Consultar","log","--vh",'4. Selecciona "Preguntar" o "Permitir"\n',"./service-worker.js","✅ Im\xe1genes actualizadas correctamente","Service Worker error:","36kYfcQn","414185OdvcBq","Buscando...","longitude","coords",'<small style="opacity: 0.8;">Distancia: ',"stringify","465474sPDVJP","Ingrese c\xf3digo o nombre del producto","4. Recarga la p\xe1gina","Im\xe1genes cacheadas exitosamente","now","Para permitir la ubicaci\xf3n:\n\n","data","success","userAgent","querySelectorAll","body","statusMessage","1cD50d0-oSTogEe9tYo9ABUSP1ONCy3SAV92zsYYIG84","about:blank","blur",'<div class="spinner" style="border-color: rgba(255,255,255,0.3); border-top-color: #fff;"></div><br>Verificando ubicaci\xf3n...',"accessBlock","innerHeight",".result-card","online",'4. Vuelve aqu\xed y toca "Reintentar"',"style","controller","cos","Service Worker no disponible","Distancia al showroom: ","toLowerCase","toString","1. Ve a Configuraci\xf3n del navegador\n","/values/","helpText","innerHTML","addEventListener","classList","1. Abre Ajustes de iOS\n","textContent","POSITION_UNAVAILABLE","split","port2","\xbfDesea actualizar todas las im\xe1genes de productos? Esto puede tardar un momento.","1. Busca el \xedcono \uD83D\uDD12 en la barra de direcciones\n","\uD83D\uDE15 No se encontraron resultados","No se pudo obtener tu ubicaci\xf3n.<br><br>","onLine","test","PERMISSION_DENIED","result-price","src","result-name","S/C","getElementById","error","push","register","latitude","result-info","geolocation","Sesi\xf3n iniciada. Se cerrar\xe1 autom\xe1ticamente en 30 minutos.","blockMessage","offline","active","sqrt","Sin imagen","result-card","timestamp","block",'Actualizando im\xe1genes... <div class="spinner"></div>',"Buscando","trim","AIzaSyDwiZWDc66tv4usDIA-IreiJMLFuk0236Q","querySelector","265480CHSpjl","3239299HCmxZK","preventDefault","postMessage",'5. Vuelve aqu\xed y toca "Reintentar"',"catch","length","Esta aplicaci\xf3n solo est\xe1 disponible en nuestro showroom.<br><br>","100tOUUxe","includes","img","toFixed","❌ Error al actualizar las im\xe1genes","removeItem","code","1. Toca el \xedcono \uD83D\uDD12 o ℹ️ junto a la URL\n","add","Error al actualizar im\xe1genes:","358940NPvtdu","Producto","La sesi\xf3n ha expirado despu\xe9s de 30 minutos.<br><br>La aplicaci\xf3n se cerrar\xe1 autom\xe1ticamente.","PriceDisplay!A2:I","remove",'2. Toca "Permisos"\n',"slice","Error desconocido al obtener ubicaci\xf3n.",'<div class="spinner"></div>',"CACHE_IMAGES","resize","result-image","Debes permitir el acceso a tu ubicaci\xf3n para usar esta aplicaci\xf3n.","forEach","\uD83D\uDCA1 Toca el \xedcono \uD83D\uDD12 junto a la URL arriba y permite la ubicaci\xf3n","showroomSession","accuracy","698094vzAVdF",'<button onclick="retryLocationCheck()">Reintentar</button>',"buttonContainer","div",'3. Activa "Ubicaci\xf3n"\n','<br><img id="statusLogo" src="logo.png" alt="Distribuidora HomePoint" onclick="updateImageCache()">',"Sesi\xf3n Expirada","Error al cargar datos",'<small style="opacity: 0.8;">Por favor, cierra esta pesta\xf1a manualmente.</small>',"appendChild","m (precisi\xf3n: "];return(_0x1c5b=function(){return $})()}function newSearch(){let $=_0x39bde6;searchInput.value="",clearResults(),showStatus($(295),$(249))}searchInput[_0x39bde6(154)]("focus",$=>{let x=_0x39bde6;$[x(270)][x(136)](),$[x(195)]()}),window[_0x39bde6(154)](_0x39bde6(141),handleConnectionChange),window[_0x39bde6(154)](_0x39bde6(181),handleConnectionChange),document.querySelectorAll(_0x39bde6(262))[_0x39bde6(224)]($=>{$.addEventListener("click",$=>{let x=_0x50ab,e=$.target.dataset.key;e&&(e===x(278)?searchInput[x(267)]=searchInput.value[x(217)](0,-1):searchInput.value+=e,handleSearchInput())})}),_0x39bde6(248) in navigator&&navigator[_0x39bde6(248)][_0x39bde6(175)](_0x39bde6(284))[_0x39bde6(198)]($=>console[_0x39bde6(173)](_0x39bde6(286),$));let inactivityTimer=null;function resetInactivityTimer(){clearTimeout(inactivityTimer),inactivityTimer=setTimeout(()=>{location[_0x50ab(245)]()},12e4)}function fixViewportHeight(){let $=_0x39bde6;document[$(269)][$(143)][$(251)]($(282),.01*window[$(139)]+"px")}[_0x39bde6(254),_0x39bde6(250)].forEach($=>{let x=_0x39bde6;document[x(154)]($,resetInactivityTimer,!0)}),resetInactivityTimer(),window[_0x39bde6(154)](_0x39bde6(221),fixViewportHeight),document.addEventListener("visibilitychange",()=>{document.hidden||fixViewportHeight()}),fixViewportHeight();